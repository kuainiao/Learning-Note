### 对比LSM-Trees和B-Trees
从大的层面上来说，LSM-Tree通常在写入时更快，而B-Tree在读取时更快，因为LSM-Trees要查找多个不同的segment和SSTable文件

#### LSM-Tree的优势
对于写操作，B树索引至少需要写两次，一次写到redo log，另一次写入B树磁盘页中，即使一页只有几个字节的修改，也需要回写整个页。有一些存储引擎为了避免机器断电造成 partially write 甚至会将相同页写两次。  
```
mysql的innodb引擎有一个doublewrite机制，具体来说就是先将需要回写的数据页写到磁盘某个地方，完成之后再执行数据回写，这样断电恢复之后可以从前一个位置恢复  
有人会认为系统恢复后，MySQL可以根据redo log进行恢复，而MySQL在恢复的过程中是检查page的checksum，checksum就是pgae的最后事务号，发生partial page write问题时，page已经损坏，找不到该page中的事务号，就无法恢复。
```
Log-structured索引也会多次写(compaction和merge操作)。这种写一次数据库导致数据库多次写磁盘的行为叫做 **write amplification**。这对于SSD类型的磁盘尤其重要，因为SSD磁盘寿命是有写入次数限制的